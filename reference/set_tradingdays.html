<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Function allowing to select the trading-days regressors to be used for calendar correction in the
pre-processing step of a seasonal adjustment procedure. The default is &quot;TradingDays&quot;, with easter specific effect enabled.
(see set_easter)
All the built-in regressors are meant to correct for type
of day effect but don't take into account any holiday. To do so user-defined regressors have to be built."><title>Set Calendar effects correction in Pre-Processing Specification — set_tradingdays • rjd3toolkit</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Set Calendar effects correction in Pre-Processing Specification — set_tradingdays"><meta property="og:description" content="Function allowing to select the trading-days regressors to be used for calendar correction in the
pre-processing step of a seasonal adjustment procedure. The default is &quot;TradingDays&quot;, with easter specific effect enabled.
(see set_easter)
All the built-in regressors are meant to correct for type
of day effect but don't take into account any holiday. To do so user-defined regressors have to be built."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rjd3toolkit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.2.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rjdverse/rjd3toolkit/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Set Calendar effects correction in Pre-Processing Specification</h1>
      <small class="dont-index">Source: <a href="https://github.com/rjdverse/rjd3toolkit/blob/HEAD/R/spec_regarima.R" class="external-link"><code>R/spec_regarima.R</code></a></small>
      <div class="d-none name"><code>set_tradingdays.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function allowing to select the trading-days regressors to be used for calendar correction in the
pre-processing step of a seasonal adjustment procedure. The default is <code>"TradingDays"</code>, with easter specific effect enabled.
(see <code><a href="set_easter.html">set_easter</a></code>)</p>
<p>All the built-in regressors are meant to correct for type
of day effect but don't take into account any holiday. To do so user-defined regressors have to be built.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">set_tradingdays</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  option <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"TradingDays"</span>, <span class="st">"WorkingDays"</span>, <span class="st">"TD3"</span>, <span class="st">"TD3c"</span>, <span class="st">"TD4"</span>, <span class="st">"None"</span>,</span>
<span>    <span class="st">"UserDefined"</span><span class="op">)</span>,</span>
<span>  calendar.name <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  uservariable <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  stocktd <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  test <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"None"</span>, <span class="st">"Remove"</span>, <span class="st">"Add"</span>, <span class="st">"Separate_T"</span>, <span class="st">"Joint_F"</span><span class="op">)</span>,</span>
<span>  coef <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  coef.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"Fixed"</span>, <span class="st">"Estimated"</span><span class="op">)</span>,</span>
<span>  automatic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"Unused"</span>, <span class="st">"FTest"</span>, <span class="st">"WaldTest"</span>, <span class="st">"Aic"</span>, <span class="st">"Bic"</span><span class="op">)</span>,</span>
<span>  pftd <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  autoadjust <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  leapyear <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"LeapYear"</span>, <span class="st">"LengthOfPeriod"</span>, <span class="st">"None"</span><span class="op">)</span>,</span>
<span>  leapyear.coef <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  leapyear.coef.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"Fixed"</span>, <span class="st">"Estimated"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>the specification to customize, must be a "SPEC" class object (see details).</p></dd>


<dt>option</dt>
<dd><p>to specify the set of trading days regression variables:
<code>"TradingDays"</code> = six contrast variables, each type of day (from Monday to Saturday) vs Sundays;
<code>"WorkingDays"</code> = one working (week days)/non-working (week-ends) day contrast variable;
<code>"TD3"</code> = two contrast variables: week-days vs Sundays and  Saturdays vs Sundays;
<code>"TD3c"</code> = two contrast variables: week-days (Mondays to Thursdays) vs Sundays and  Fridays+Saturdays vs Sundays;
<code>"TD4"</code> = three contrast variables: week-days (Mondays to Thursdays) vs Sundays, Fridays vs Sundays, Saturdays vs Sundays;
<code>"None"</code> = no correction for trading days;
<code>"UserDefined"</code> = userdefined trading days regressors.</p></dd>


<dt>calendar.name</dt>
<dd><p>name (string) of the user-defined calendar to be taken into account when generating
built-in regressors set in 'option' (if not 'UserDefined).(see examples)</p></dd>


<dt>uservariable</dt>
<dd><p>a vector of characters to specify the name of user-defined calendar regressors.
When specified, automatically set <code>option = "UserDefined"</code>. Names have to be the same as
in <code><a href="modelling_context.html">modelling_context</a></code>, see example.</p></dd>


<dt>stocktd</dt>
<dd><p>a numeric indicating the day of the month when inventories and other stock are reported
(to denote the last day of the month, set the variable to 31).
When specified, automatically set <code>option = "None"</code>. See <code>stock_td</code> function for details.</p></dd>


<dt>test</dt>
<dd><p>defines the pre-tests for the significance of the trading day regression variables
based on the AICC statistics: <code>"None"</code> = the trading day variables are not pre-tested and are included in the model;</p>
<p>(REGARIMA/X-13 specific)</p>
<p><code>"Add"</code> = the trading day variables are not included in the initial regression model
but can be added to the RegARIMA model after the test;
<code>"Remove"</code> = the trading day variables belong to the initial regression model but can be removed from the RegARIMA model
after the test;</p>
<p>(TRAMO specific)</p>
<p><code>"Separate_T"</code> = a t-test is applied to each trading day variable separately and the trading day variables are included in the RegArima model
if at least one t-statistic is greater than 2.6 or if two t-statistics are greater than 2.0 (in absolute terms);
<code>"Joint_F"</code> = a joint F-test of significance of all the trading day variables. The trading day effect is significant if the F statistic is greater than 0.95.</p></dd>


<dt>coef</dt>
<dd><p>vector of coefficients for the trading-days regressors.</p></dd>


<dt>coef.type, leapyear.coef.type</dt>
<dd><p>vector defining if the coefficients are fixed or estimated.</p></dd>


<dt>automatic</dt>
<dd><p>defines whether the calendar effects should be added to the model manually (<code>"Unused"</code>) or automatically.
During the automatic selection, the choice of the number of calendar variables can be based on the F-Test (<code>"FTest"</code>, TRAMO specific), the Wald Test (<code>"WaldTest"</code>), or by minimizing AIC or BIC;
the model with higher F value is chosen, provided that it is higher than <code>pftd</code>).</p></dd>


<dt>pftd</dt>
<dd><p>(TRAMO SPECIFIC) <code>numeric</code>. The p-value used to assess the significance of the pre-tested calendar effects.</p></dd>


<dt>autoadjust</dt>
<dd><p>a logical indicating if the program corrects automatically the raw series for
the leap year effect if the leap year regressor is significant. Only used when the data is log transformed.</p></dd>


<dt>leapyear</dt>
<dd><p>a <code>character</code> to specify whether or not to include the leap-year effect in the model:
<code>"LeapYear"</code> = leap year effect; <code>"LengthOfPeriod"</code> = length of period (REGARIMA/X-13 specific),
<code>"None"</code> = no effect included. Default: a leap year effect regressor is included with any built-in set
of trading day regressors.</p></dd>


<dt>leapyear.coef</dt>
<dd><p>coefficient of the leap year regressor.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>x</code> specification param must be a JD3_X13_SPEC" class object generated with <code>rjd3x13::spec_x13()</code>
(or "JD3_REGARIMA_SPEC" generated with <code>rjd3x13::spec_regarima()</code> or "JD3_TRAMOSEATS_SPEC"
generated with <code>rjd3tramoseats::spec_tramoseats()</code> or "JD3_TRAMO_SPEC" generated with
<code>rjd3tramoseats::spec_tramo()</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>More information on calendar correction in JDemetra+ online documentation:
<a href="https://jdemetra-new-documentation.netlify.app/a-calendar-correction" class="external-link">https://jdemetra-new-documentation.netlify.app/a-calendar-correction</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="modelling_context.html">modelling_context</a></code>, <code><a href="calendar_td.html">calendar_td</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Pre-defined regressors</span></span></span>
<span class="r-in"><span><span class="co"># y_raw&lt;-ABS$X0.2.09.10.M</span></span></span>
<span class="r-in"><span><span class="co"># init_spec &lt;- rjd3x13::spec_x13("RSA5c")</span></span></span>
<span class="r-in"><span><span class="co"># new_spec&lt;-set_tradingdays(init_spec,</span></span></span>
<span class="r-in"><span><span class="co">#                          option = "TD4",</span></span></span>
<span class="r-in"><span><span class="co">#                          test =  "None",</span></span></span>
<span class="r-in"><span><span class="co">#                        coef=c(0.7,NA,0.5),</span></span></span>
<span class="r-in"><span><span class="co">#        coef.type=c("Fixed","Estimated","Fixed"),</span></span></span>
<span class="r-in"><span><span class="co">#        leapyear="LengthOfPeriod",</span></span></span>
<span class="r-in"><span><span class="co">#        leapyear.coef=0.6)</span></span></span>
<span class="r-in"><span><span class="co"># sa&lt;-rjd3x13::x13(y_raw,new_spec)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Pre-defined regressors based on user-defined calendar</span></span></span>
<span class="r-in"><span><span class="co">### create a calendar</span></span></span>
<span class="r-in"><span><span class="va">BE</span> <span class="op">&lt;-</span> <span class="fu"><a href="national_calendar.html">national_calendar</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span><span class="fu"><a href="fixed_day.html">fixed_day</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">21</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> <span class="fu"><a href="special_day.html">special_day</a></span><span class="op">(</span><span class="st">"NEWYEAR"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> <span class="fu"><a href="special_day.html">special_day</a></span><span class="op">(</span><span class="st">"CHRISTMAS"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> <span class="fu"><a href="special_day.html">special_day</a></span><span class="op">(</span><span class="st">"MAYDAY"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> <span class="fu"><a href="special_day.html">special_day</a></span><span class="op">(</span><span class="st">"EASTERMONDAY"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> <span class="fu"><a href="special_day.html">special_day</a></span><span class="op">(</span><span class="st">"ASCENSION"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> <span class="fu"><a href="special_day.html">special_day</a></span><span class="op">(</span><span class="st">"WHITMONDAY"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> <span class="fu"><a href="special_day.html">special_day</a></span><span class="op">(</span><span class="st">"ASSUMPTION"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> <span class="fu"><a href="special_day.html">special_day</a></span><span class="op">(</span><span class="st">"ALLSAINTSDAY"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span> <span class="fu"><a href="special_day.html">special_day</a></span><span class="op">(</span><span class="st">"ARMISTICE"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## put into a context</span></span></span>
<span class="r-in"><span><span class="va">my_context</span><span class="op">&lt;-</span><span class="fu"><a href="modelling_context.html">modelling_context</a></span><span class="op">(</span>calendars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cal<span class="op">=</span><span class="va">BE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">## create a specification</span></span></span>
<span class="r-in"><span><span class="co">#init_spec &lt;- rjd3x13::spec_x13("RSA5c")</span></span></span>
<span class="r-in"><span><span class="co">## modify the specification</span></span></span>
<span class="r-in"><span><span class="co"># new_spec&lt;-set_tradingdays(init_spec,</span></span></span>
<span class="r-in"><span><span class="co">#                          option = "TradingDays", calendar.name="cal")</span></span></span>
<span class="r-in"><span><span class="co">## estimate with context</span></span></span>
<span class="r-in"><span><span class="co"># sa&lt;-rjd3x13::x13(y_raw,new_spec, context=my_context)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># User-defined regressors</span></span></span>
<span class="r-in"><span><span class="co"># init_spec &lt;- rjd3x13::spec_x13("RSA5c")</span></span></span>
<span class="r-in"><span><span class="co"># add regressors to context</span></span></span>
<span class="r-in"><span><span class="co"># variables&lt;-list(Monday,Tuesday, Wednesday,</span></span></span>
<span class="r-in"><span><span class="co"># Thursday, Friday, Saturday)</span></span></span>
<span class="r-in"><span><span class="co"># my_context&lt;-modelling_context(variables=variables)</span></span></span>
<span class="r-in"><span><span class="co"># create a new spec (here default group name: r)</span></span></span>
<span class="r-in"><span><span class="co"># new_spec&lt;-set_tradingdays(init_spec,</span></span></span>
<span class="r-in"><span><span class="co">#                          option = "UserDefined",</span></span></span>
<span class="r-in"><span><span class="co"># uservariable=c("r.Monday","r.Tuesday","r.Wednesday","r.Thursday","r.Friday","r.Saturday"),</span></span></span>
<span class="r-in"><span><span class="co"># test = "None")</span></span></span>
<span class="r-in"><span><span class="co"># estimate with context</span></span></span>
<span class="r-in"><span><span class="co"># sa&lt;-rjd3x13::x13(y_raw,new_spec, context=my_context)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jean Palate, Alain Quartier-la-Tente, Tanguy Barthelemy, Anna Smyk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

